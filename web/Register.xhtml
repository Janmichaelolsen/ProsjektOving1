<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets">

    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link href="resources/css/default.css" rel="stylesheet" type="text/css" />
    <link href="resources/css/cssLayout.css" rel="stylesheet" type="text/css" />
    <ui:composition template="./resources/RegTemp.xhtml">
        <!--Ruten øverst med tittel-->
        <ui:define name="top">
            <div align="center">
                <h1>#{tekster.Regtittel}</h1>
            </div>
        </ui:define>
        <!--Ruten til venstre med registrering av ny økt-->
        <ui:define name="left">
            <div align="center">
                <h:form>
                    <table>
                        <tr>
                            <td>#{tekster.oktnummer}: </td>
                            <td><h:outputText value="#{behandler.sisteOktnr}"></h:outputText></td>
                        </tr>
                        <tr>
                            <td>#{tekster.dato}:</td>
                            <td><h:inputText value="#{behandler.tempOkt.dato}">
                                    <f:convertDateTime pattern="dd/MM/yyyy"/></h:inputText></td>
                        </tr>
                        <tr>
                            <td>#{tekster.varighet}:</td>
                            <td><h:inputText value="#{behandler.tempOkt.varighet}"></h:inputText></td>
                        </tr>
                        <tr>
                            <td>#{tekster.kategori}:</td>
                            <td>
                                <h:selectOneMenu value="#{behandler.tempOkt.kategori}">
                                    <f:selectItem itemLabel="#{tekster.sykling}" itemValue="#{tekster.sykling}"></f:selectItem>
                                    <f:selectItem itemLabel="#{tekster.svømming}" itemValue="#{tekster.svømming}"></f:selectItem>
                                    <f:selectItem itemLabel="#{tekster.løping}" itemValue="#{tekster.løping}"></f:selectItem>
                                    <f:selectItem itemLabel="#{tekster.styrke}" itemValue="#{tekster.styrke}"></f:selectItem>
                                    <f:selectItem itemLabel="#{tekster.yoga}" itemValue="#{tekster.yoga}"></f:selectItem>
                                    <f:selectItems value="#{behandler.tillegsOkter}" var="tillegg" 
                                                   itemLabel="#{tillegg}" itemValue="#{tillegg}"></f:selectItems>
                                </h:selectOneMenu>
                                <h:commandButton value="#{tekster.leggtil}" action="#{behandler.setnykat()}"/>
                            </td>
                        </tr>
                        <tr>
                            <td></td>
                            <td>
                                <h:inputText value="#{behandler.tempKat}" size="6" rendered="#{behandler.nykat}"></h:inputText>
                                <h:commandButton value="#{tekster.lagre}" action="#{behandler.leggTilKategori()}" rendered="#{behandler.nykat}"/>
                            </td>
                        </tr>
                        <tr>
                            <td>#{tekster.tekst}:</td>
                            <td><h:inputText value="#{behandler.tempOkt.tekst}"></h:inputText></td>
                        </tr>
                        <tr>
                            <td><h:commandButton value="#{tekster.Logout}" action="index.xhtml"/></td>
                            <td><h:commandButton value="Send" action="#{behandler.regOkt()}"/></td>
                        </tr>
                    </table>

                </h:form>
            </div>
        </ui:define>


        <!--Ruten i midten med oversikttabell over økter-->
        <ui:define name="content">
            <h:form>
                <table>
                    <tr>
                        <td>
                        <h:outputText value="#{tekster.sorter}:" rendered="#{behandler.dataFins}"></h:outputText>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <h:outputText value="#{tekster.aar}: " rendered="#{behandler.dataFins}"></h:outputText>
                            <h:selectOneMenu value="#{behandler.valgtaar}" rendered="#{behandler.dataFins}">
                                <f:selectItem itemLabel="#{tekster.alle}" itemValue="0"></f:selectItem>
                                <f:selectItems value="#{behandler.aar}" var="aar"
                                               itemLabel="#{aar}" itemValue="#{aar}"></f:selectItems>
                            </h:selectOneMenu>
                            <h:outputText value="#{tekster.mnd}: " rendered="#{behandler.dataFins}"></h:outputText>
                            <h:selectOneMenu value="#{behandler.valgtmnd}" rendered="#{behandler.dataFins}">
                                <f:selectItem itemLabel="#{tekster.alle}" itemValue="0"></f:selectItem>
                                <f:selectItems value="#{behandler.mnd}" var="mnd"
                                               itemLabel="#{mnd}" itemValue="#{mnd}"></f:selectItems>
                            </h:selectOneMenu>
                            <h:commandButton value ="#{tekster.oppdater}" action="#{behandler.oppdatersort()}" 
                                             rendered="#{behandler.dataFins}"/>
                            </td>
                    </tr>
                </table>
            </h:form>
            <div align="center">
                <h:outputStylesheet library ="css" name= "default.css"/>
                <h:form>
                    <h:outputText rendered="#{not behandler.dataFins}"  value="#{tekster.regmelding}"></h:outputText>
                    <div style="overflow:auto; max-width:700px; max-height:460px;">
                        <h:dataTable value="#{behandler.synkListe}" var="okter" 
                                     rendered="#{behandler.dataFins}" border="1"
                                     rowClasses="oddeRad, likeRad" headerClass="hode" footerClass="fot"
                                     columnClasses="rad1, rad2, rad3, rad4, rad5, rad6, rad7"
                                     styleClass="standard" bgcolor="whitesmoke">
                            <h:column>
                                <f:facet name="header">#{tekster.oktnummer}</f:facet>
                                <h:outputText value ="#{okter.okten.oktnummer}"></h:outputText>
                                <f:facet name="footer">#{tekster.antokt}#{behandler.okter.antallokter}</f:facet>
                            </h:column>
                            <h:column>
                                <f:facet name="header">#{tekster.dato}</f:facet>
                                <h:outputText value ="#{okter.okten.dato}" rendered="#{not okter.editable}" >
                                    <f:convertDateTime pattern="dd/MM/yyyy"/></h:outputText>
                                <h:inputText value="#{okter.okten.dato}" rendered="#{okter.editable}" size="4">
                                    <f:convertDateTime pattern="dd/MM/yyyy"/></h:inputText>

                            </h:column>
                            <h:column>
                                <f:facet name="header">#{tekster.varighet}</f:facet>
                                <h:outputText value ="#{okter.okten.varighet}" rendered="#{not okter.editable}"></h:outputText>
                                <h:inputText value="#{okter.okten.varighet}" rendered="#{okter.editable}" size="5"></h:inputText>
                                <f:facet name="footer">#{tekster.gjsnitt}#{behandler.okter.snittVarighet}</f:facet>
                            </h:column>
                            <h:column>
                                <f:facet name="header">#{tekster.kategori}</f:facet>
                                <h:outputText value ="#{okter.okten.kategori}" rendered="#{not okter.editable}"></h:outputText>
                                <h:inputText value="#{okter.okten.kategori}" rendered="#{okter.editable}" size="7"></h:inputText>
                            </h:column>
                            <h:column>
                                <f:facet name="header">#{tekster.tekst}</f:facet>
                                <h:outputText value ="#{okter.okten.tekst}" rendered="#{not okter.editable}"></h:outputText>
                                <h:inputText value="#{okter.okten.tekst}" rendered="#{okter.editable}" size="20"></h:inputText>
                            </h:column>
                            <h:column>
                                <f:facet name="header">#{tekster.endre}</f:facet>
                                <h:selectBooleanCheckbox value ="#{okter.editable}" onclick="submit()"></h:selectBooleanCheckbox>
                            </h:column>
                            <h:column>
                                <f:facet name="header">#{tekster.slett}</f:facet>
                                <h:selectBooleanCheckbox value ="#{okter.skalslettes}" onclick="submit()"></h:selectBooleanCheckbox>
                            </h:column>
                        </h:dataTable>
                    </div>
                    <h:commandButton value ="#{tekster.oppdater}" action="#{behandler.oppdater()}" rendered="#{behandler.dataFins}"></h:commandButton>
                </h:form>
            </div>
        </ui:define>
    </ui:composition>
</html>

